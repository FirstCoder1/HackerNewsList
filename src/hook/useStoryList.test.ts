import { renderHook } from "@testing-library/react-hooks";
import { getStoryList } from "../api";
import { useStoryList } from "./useStoryList";

const mockTopList = [
  34923813, 34923842, 34923234, 34904888, 34919659, 34918782, 34919449,
  34905678, 34901474, 34919034, 34912300, 34904895, 34923670, 34897028,
  34920920, 34901367, 34921728, 34906029, 34919391, 34897589,
];
const mockStoryList = [
  {
    by: "nemoniac",
    descendants: 17,
    id: 34923813,
    kids: [
      34924248, 34924043, 34924186, 34924099, 34924342, 34924320, 34924166,
    ],
    score: 64,
    time: 1677241864,
    title: "Mozilla Sees Loopholes in Google’s Data Safety Labels",
    type: "story",
    url: "https://foundation.mozilla.org/en/campaigns/googles-data-safety-labels/",
  },
  {
    by: "msm_",
    descendants: 1,
    id: 34923842,
    kids: [34924222],
    score: 29,
    time: 1677242109,
    title: "A tale of Phobos – how we almost cracked a ransomware using CUDA",
    type: "story",
    url: "https://cert.pl/en/posts/2023/02/breaking-phobos/",
  },
  {
    by: "alexcos",
    descendants: 6,
    id: 34923234,
    kids: [34924282, 34924363, 34924327],
    score: 24,
    time: 1677236304,
    title: "It’s time for Alphabet to spin off YouTube",
    type: "story",
    url: "https://www.economist.com/business/2023/02/23/its-time-for-alphabet-to-spin-off-youtube",
  },
  {
    by: "ufo",
    descendants: 11,
    id: 34904888,
    kids: [
      34924278, 34923363, 34924258, 34923350, 34924045, 34909656, 34923777,
    ],
    score: 65,
    time: 1677110065,
    title: "Squeezing a Sokoban game into 10 lines of Haskell",
    type: "story",
    url: "https://www.cole-k.com/2023/02/21/tiny-games-hs/",
  },
  {
    by: "argilium",
    descendants: 56,
    id: 34919659,
    kids: [
      34921113, 34921956, 34923561, 34920646, 34923746, 34921206, 34920182,
      34921827, 34920901, 34921690, 34922227, 34920490, 34920469, 34921293,
      34920098,
    ],
    score: 190,
    time: 1677203386,
    title: "Eduard: Swiss-Style Relief Shading for Maps Using Machine Learning",
    type: "story",
    url: "https://dilpreet.co/projects/eduard",
  },
  {
    by: "memorable",
    descendants: 56,
    id: 34918782,
    kids: [
      34921985, 34923950, 34924266, 34921763, 34924203, 34923532, 34922368,
      34923852, 34921342, 34920341, 34923566, 34920997, 34921570, 34921944,
      34920912, 34922930, 34923424, 34922950, 34920380, 34921512, 34922776,
      34920401, 34922777, 34923149, 34920627,
    ],
    score: 239,
    time: 1677197541,
    title: "Burgr – Books in Your Terminal",
    type: "story",
    url: "https://blubsblog.bearblog.dev/burgr-books-in-your-terminal/",
  },
  {
    by: "fairytalemtg",
    descendants: 167,
    id: 34919449,
    kids: [
      34919996, 34920583, 34919897, 34923859, 34924216, 34921096, 34920553,
      34920869, 34920102, 34920386, 34923917, 34923951, 34920819, 34920306,
      34923808, 34920696, 34920336, 34922325, 34920776, 34923569, 34920716,
      34920890, 34919858, 34919969, 34920360, 34923407, 34920604, 34921300,
      34919881, 34919841, 34920016, 34920470, 34923507, 34920710, 34921431,
      34920857,
    ],
    score: 262,
    time: 1677202014,
    title: "FCC Considering Banning Transfer of Online Consent Forms",
    type: "story",
    url: "https://tcpaworld.com/2023/02/23/closing-the-lead-generator-loophole-fcc-considering-banning-transfer-of-online-consent-forms-and-other-critical-changes-and-i-warned-you/",
  },
  {
    by: "randomwalker",
    descendants: 23,
    id: 34905678,
    kids: [
      34922602, 34924145, 34922966, 34923881, 34906420, 34922190, 34922544,
      34923296, 34923158,
    ],
    score: 77,
    time: 1677116506,
    title: "Against predictive optimization",
    type: "story",
    url: "https://predictive-optimization.cs.princeton.edu/",
  },
  {
    by: "bookofjoe",
    descendants: 9,
    id: 34901474,
    kids: [34923872, 34923719, 34924010, 34923514, 34924175],
    score: 21,
    time: 1677094843,
    title: "Towards quantum computers that are robust to errors",
    type: "story",
    url: "https://www.nature.com/articles/d41586-022-04532-4",
  },
  {
    by: "reteltech",
    descendants: 15,
    id: 34919034,
    kids: [
      34920803, 34923354, 34921398, 34922152, 34921160, 34920709, 34920666,
      34921346,
    ],
    score: 96,
    time: 1677199197,
    title: "Apple I operation manual (1976) [pdf]",
    type: "story",
    url: "http://s3data.computerhistory.org/brochures/apple.applei.1976.102646518.pdf",
  },
  {
    by: "nop_slide",
    descendants: 168,
    id: 34912300,
    kids: [
      34914610, 34921263, 34916050, 34913952, 34914115, 34913087, 34913315,
      34918411, 34915778, 34913189, 34923017, 34913004, 34921863, 34915729,
      34920287, 34912970, 34921491, 34915601, 34913753, 34918036, 34917930,
      34915693, 34921117, 34914899, 34918463, 34918067, 34917778, 34916204,
      34913635, 34914772,
    ],
    score: 908,
    time: 1677168402,
    title: "Reverse engineering a mysterious UDP stream in my hotel (2016)",
    type: "story",
    url: "https://www.gkbrk.com/2016/05/hotel-music/",
  },
  {
    by: "yamrzou",
    descendants: 21,
    id: 34904895,
    kids: [34922756, 34922682, 34922389, 34923632, 34905332, 34923496],
    score: 44,
    time: 1677110123,
    title: "The mysterious inner life of the octopus",
    type: "story",
    url: "https://www.bbc.com/future/article/20220720-do-octopuses-feel-pain",
  },
  {
    by: "dylanjcastillo",
    descendants: 44,
    id: 34923670,
    kids: [
      34924381, 34924369, 34924190, 34924171, 34924367, 34924219, 34923999,
      34924082, 34924009, 34924007, 34924083, 34924044, 34924001, 34923890,
    ],
    score: 43,
    time: 1677240490,
    title: "Show HN: Get advice from a GPT3-based stoic philosopher",
    type: "story",
    url: "https://seneca.dylancastillo.co/",
  },
  {
    by: "unripe_syntax",
    descendants: 16,
    id: 34897028,
    kids: [34920873, 34923708, 34922830, 34922672, 34922453, 34923284],
    score: 70,
    time: 1677079592,
    title: "The Importance of Probability in Data Science",
    type: "story",
    url: "https://www.kdnuggets.com/2023/02/importance-probability-data-science.html",
  },
  {
    by: "pncnmnp",
    descendants: 4,
    id: 34920920,
    kids: [34924131, 34923138],
    score: 38,
    time: 1677214176,
    title: "How the cover art of Defender of the Crown (1986) was made (2013)",
    type: "story",
    url: "https://spelpappan.se/2013/08/this-is-how-the-cover-art-of-defender-of-the-crown-1986-was-made/",
  },
  {
    by: "CharlesW",
    descendants: 1,
    id: 34901367,
    kids: [34924291],
    score: 5,
    time: 1677094467,
    title: "Keith Lynch's timeline of net related terms and concepts",
    type: "story",
    url: "http://keithlynch.net/timeline.html",
  },
  {
    by: "Gabriel_h",
    id: 34921728,
    score: 1,
    text: 'Hey HN,<p>I&#x27;m Gabriel, founder of Meticulous.<p>Our mission is to radically accelerate the pace of software development for every company in the world. We&#x27;re starting with a tool to catch UI bugs in web applications with zero-effort from developers.<p>How it works: Insert a single line of JavaScript onto your site, and we record thousands of real user sessions. We then replay these sessions on head and base commits of PRs, take screenshots at key points, and diff those screenshots to catch visual regressions before they hit production. We employ novel techniques to eliminate flakes. You can watch a 60-second demo at [meticulous.ai](<a href="http:&#x2F;&#x2F;meticulous.ai&#x2F;">http:&#x2F;&#x2F;meticulous.ai&#x2F;</a>).<p>We are a London-based YC company. Our engineering team previously worked at Dropbox, Opendoor, Palantir and Google, and have previously led 100+ engineer organizations at these companies. We just raised $4m, and are backed by some of the best founders and technical leaders in Silicon Valley, including Guillermo Rauch (founder Vercel, author next.js), Jason Warner (CTO GitHub), Scott Belsky (CPO Adobe), Calvin French-Owen (founder Segment), Jared Friedman (YC partner and former CTO of Scribd) and a bunch of other incredible folks.<p>Catching visual regressions is just the start. There is an entire category of products to build on top of replay. This ranges from catching exceptions to revealing the performance impact of frontend code.<p>We want to change the way the world develops software, and influence software approaches for decades to come.<p>We are seeding a London office and hiring an onsite founding engineer to join our team of four.<p>You will have autonomy in building out this technology, but here are a few problems you might work on:<p>- Build a distributed system to concurrently replay thousands of sessions, such that a developer gets a result in seconds.<p>- Speed up the replay of sessions in a way that retains determinism.<p>- Derive algorithms to detect sessions that cover differing code paths and edge cases, and ignore sessions that are too similar.<p>- Help build out a team of world-class, highly collaborative, software engineers.<p>As founding engineer, you get to shape the company, and build the culture and technology from the ground up.<p>What we look for:<p>In a sentence: Technically brilliant, delightful to work with, combined with a self-awareness and strong desire to improve. We also want to make sure everyone is highly supportive of each other; we win as a team.<p>We&#x27;re currently only looking to bring on folks with senior level skill sets and 5+ years of industry experience. You should have strong web fundamentals and a deep love for software engineering. Maybe you enjoy programming books like Clean Code, Designing Data Intensive Applications, Pragmatic Programmer etc. or enjoy hacking on interesting side projects. You value transparency and candid feedback, and are motivated by a strong desire to become the best engineer you can be.<p>You can read about our values here <a href="https:&#x2F;&#x2F;ruby-wish-a8f.notion.site&#x2F;Mission-Values-979c32ec58e74856af02da2e59c9f64d" rel="nofollow">https:&#x2F;&#x2F;ruby-wish-a8f.notion.site&#x2F;Mission-Values-979c32ec58e...</a><p>You will be given the space and time to up-level yourself as an engineer in terms of conferences, reading, or whatever you think will be most valuable. We will also set you up with mentorship, if you desire it, from top engineering leaders (folks running 100-engineer organizations at the world&#x27;s leading tech companies).<p>You’ll get to work alongside some of the best engineers there are, break new ground solving truly novel CS problems and deliver something that transforms how software is built.<p>If this sounds interesting, please reach out to me at gabe [at] meticulous [dot] ai with “HN” in the subject line and 2-3 sentences about what you find interesting about Meticulous and your resume&#x2F;LinkedIn&#x2F;GitHub.',
    time: 1677222102,
    title:
      "Meticulous (YC S21) Is Hiring #3 Engineer in London to Eliminate Testing",
    type: "job",
  },
  {
    by: "thedday",
    descendants: 7,
    id: 34906029,
    kids: [34923866, 34923941, 34923831, 34923893],
    score: 17,
    time: 1677120028,
    title:
      "Kombucha cultures can be turned into flexible electric circuit boards",
    type: "story",
    url: "https://www.newscientist.com/article/2358806-kombucha-cultures-can-be-turned-into-flexible-electric-circuit-boards/",
  },
  {
    by: "SerCe",
    descendants: 83,
    id: 34919391,
    kids: [
      34922460, 34920588, 34920325, 34920364, 34920420, 34921082, 34920495,
      34924173, 34922406, 34920254, 34922432, 34920275, 34921975, 34920371,
      34920898, 34920567, 34922847,
    ],
    score: 98,
    time: 1677201630,
    title: "So, you’ve been challenged to a duel. What are the rules? (2016)",
    type: "story",
    url: "https://blogs.loc.gov/law/2016/06/so-youve-been-challenged-to-a-duel-what-are-the-rules/",
  },
  {
    by: "mattrighetti",
    descendants: 18,
    id: 34897589,
    kids: [
      34919806, 34919384, 34919783, 34921700, 34923288, 34919395, 34921936,
      34922585, 34919822,
    ],
    score: 83,
    time: 1677081508,
    title: "AsciiDoc, Liquid and Jekyll",
    type: "story",
    url: "https://mattrighetti.com/2023/02/22/asciidoc-liquid-and-jekyll.html",
  },
];
jest.mock("../api", () => ({
  getStoryList: jest.fn(),
}));
(getStoryList as jest.Mock).mockImplementation((ids: number[]) =>
  mockStoryList.filter((story) => ids.includes(story.id))
);
console.log(mockTopList);
const { result } = renderHook(
  ({ topList, showNumber }) => useStoryList(topList, showNumber),
  { initialProps: { topList: mockTopList, showNumber: 20 } }
);
describe("Test UseStoryList", () => {
  it("test result from UseStoryList", async () => {
    expect(result.current.firstStoryList.length).toBe(17);
    expect(result.current.isLoadingStory).toBe(false);
  });
});
